<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <title>Document</title>
</head>
<body>
<script>
d3.csv("./stocks.csv", function(data) {
  console.log(data);
  var parse = d3.time.format("%b %Y").parse;
  symbols = d3.nest()
      .key(function(d) { return d.symbol; })
      .entries(stocks = data);
  symbols.forEach(function(s) {
    s.values.forEach(function(d) { d.date = parse(d.date); d.price = +d.price; });
    s.maxPrice = d3.max(s.values, function(d) { return d.price; });
    s.sumPrice = d3.sum(s.values, function(d) { return d.price; });
  });
  symbols.sort(function(a, b) { return b.maxPrice - a.maxPrice; });
  var g = svg.selectAll("g")
      .data(symbols)
    .enter().append("g")
      .attr("class", "symbol");

  setTimeout(lines, duration);
});
</script>
</body>
</html>
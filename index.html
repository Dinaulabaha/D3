<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<script src="https://d3js.org/d3.v4.min.js"></script>
<title>Document</title>
</head>
<body>
<script>
var symbols;
d3.csv("./stocks.csv", function(data) {
	console.log(data);
	symbols = d3.nest().key(function(d) { 
		return d.symbol; }).entries(stocks = data);
});

var svgctrl = d3.select("body").append("svg").attr("width", 500).attr("height", 500);
MSFT = symbols['0'].values;
var datactrl = svgctrl.data(MSFT).enter().append("path").selectAll("path");

var m = [20, 20, 30, 20],
    w = 960 - m[1] - m[3],
    h = 500 - m[0] - m[2];
function lines() {
	x = d3.time.scale().range([0, w - 60]);
	y = d3.scale.linear().range([h / 4 - 20, 0]);
	x.domain([
		d3.min(symbols, function(d) { return d.values[0].date; }),
		d3.max(symbols, function(d) { return d.values[d.values.length - 1].date; })
		]);
	datactrl.each(function(d) {
		var e = d3.select(this);
		e.append("path").attr("class", "line");
		e.append("circle").attr("r", 5).
			style("fill", function(d) { 
				return color(d.key); }).
			style("stroke", "#000").
			style("stroke-width", "2px");
		e.append("text").attr("x", 12)
		.attr("dy", ".31em")
		.text(d.key);
	});
}
</script>
</body>
</html>